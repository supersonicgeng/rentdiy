webpackJsonp([22],{"1+UU":function(t,o,e){"use strict";function i(t){e("qI1+")}Object.defineProperty(o,"__esModule",{value:!0});var n=e("qY40"),s=e("uZkV"),a=e("VU/8"),r=i,c=a(n.a,s.a,!1,r,"data-v-36d7d771",null);o.default=c.exports},kNo4:function(t,o,e){o=t.exports=e("FZ+f")(!1),o.push([t.i,".scan[data-v-36d7d771]{height:100%;background:#fff}.scan input[data-v-36d7d771]{text-align:right}.scan .vanInput[data-v-36d7d771]{float:left;height:60px;width:80%}.scan .snBtn[data-v-36d7d771]{float:left;height:60px;line-height:60px}.scan .mui-input-group[data-v-36d7d771]{padding-top:40px}.scan .right-select[data-v-36d7d771]{width:65%;height:50px;line-height:2;float:right;text-align:right;padding:10px 15px;color:#a2aab5;font-size:15px}.scan .right-val[data-v-36d7d771]{display:block;color:#333;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.scan .select-area[data-v-36d7d771]{position:fixed;z-index:1001;left:0;bottom:0;width:100%;height:50%;border-radius:0}.scan i[data-v-36d7d771]{font-size:15px}",""])},"qI1+":function(t,o,e){var i=e("kNo4");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("600db0fe",i,!0,{})},qY40:function(t,o,e){"use strict";var i=e("BUCX"),n=(e.n(i),e("Au9i"));e.n(n);o.a={name:"AddDeviceForm",data:function(){return{snForm:{snNumber:"",type:"",commTech:"",commTechCode:"",name:"",gardenId:"",gardenName:"",plotId:"",plotName:""},btnLoading:!1,commTechList:[],showPicker1:!1,columns1:[],showPicker2:!1,columns2:[],showPicker3:!1,columns3:[],firstDeviceList:[],gardenList:[],plotList:[]}},mounted:function(){this.getSnCode(),this.getCommTechList(),this.getFirstDeviceType(),this.getGardenList()},methods:{getSnCode:function(){var t=this;console.log(this.$route.params.id),this.snForm.snNumber=this.$route.params.id,this.$axios.getDeviceTypeNameBySnNumber({snNumber:this.snForm.snNumber}).then(function(o){o.code&&200==o.code&&(t.snForm.type=o.data.firstTheDevice.name+" "+o.data.secondTheDevice.name)})},getCommTechList:function(){var t=this;this.$axios.getCommTechList({}).then(function(o){if(console.log("Tech",o),o.code&&200==o.code){t.commTechList=o.data;var e=[];o.data.forEach(function(t){e.push(t.description)}),t.columns1=e}})},getFirstDeviceType:function(){var t=this;this.$axios.getFirstDeviceType({}).then(function(o){console.log("firstDevice",o),o.code&&200==o.code&&(t.firstDeviceList=o.data)})},getGardenList:function(){var t=this;this.$axios.getGardenList({}).then(function(o){if(console.log("garden",o),o.code&&200==o.code){t.gardenList=o.data;var e=[];o.data.forEach(function(t){e.push(t.name)}),t.columns2=e}})},onConfirm1:function(t){var o=this;this.snForm.commTech=t,this.showPicker1=!1,this.commTechList.forEach(function(e){e.description==t&&(o.snForm.commTechCode=e.code)})},onConfirm2:function(t){var o=this;this.snForm.gardenName=t,this.showPicker2=!1,this.gardenList.forEach(function(e){e.name==t&&(o.snForm.gardenId=e.id,o.snForm.plotId="",o.snForm.plotName="")}),this.snForm.gardenId&&this.getBlockList()},getBlockList:function(){var t=this,o={gardenId:this.snForm.gardenId};this.$axios.getBlockList(o).then(function(o){if(console.log("block",o),o.code&&200==o.code){t.plotList=o.data;var e=[];o.data.forEach(function(t){e.push(t.name)}),t.columns3=e}})},onConfirm3:function(t){var o=this;this.snForm.plotName=t,this.showPicker3=!1,this.plotList.forEach(function(e){e.name==t&&(o.snForm.plotId=e.id)})},creatDevice:function(){var t=this;if(!this.snForm.commTechCode)return e.i(n.Toast)("请选择通信技术"),!1;if(this.snForm.name||e.i(n.Toast)("请输入设备名称"),!this.snForm.gardenId)return e.i(n.Toast)("请选择园区"),!1;if(!this.snForm.plotId)return e.i(n.Toast)("请输入地块"),!1;var o={name:this.snForm.name,snNumber:this.snForm.snNumber,commTech:this.snForm.commTechCode,hasPlot:0,plotId:this.snForm.plotId};this.btnLoading=!0,this.$axios.insertFacility(o).then(function(o){t.btnLoading=!1,console.log("insert",o),o.code&&200!=o.code?(e.i(n.Toast)(o.message),t.$router.push("/addDevice")):o.code&&200==o.code&&(e.i(n.Toast)("添加成功"),t.$router.push("/addDeviceSuccess"))})}}}},uZkV:function(t,o,e){"use strict";var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"scan"},[e("form",{staticClass:"mui-input-group",attrs:{action:""},on:{submit:function(o){return o.preventDefault(),t.creatDevice(o)}}},[e("div",{staticClass:"mui-input-row"},[e("label",[t._v("设备SN号")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.snForm.snNumber,expression:"snForm.snNumber"}],staticClass:"mui-input-clear",attrs:{type:"text"},domProps:{value:t.snForm.snNumber},on:{input:function(o){o.target.composing||t.$set(t.snForm,"snNumber",o.target.value)}}})]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("设备类型")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.snForm.type,expression:"snForm.type"}],staticClass:"mui-input-clear",attrs:{type:"text"},domProps:{value:t.snForm.type},on:{input:function(o){o.target.composing||t.$set(t.snForm,"type",o.target.value)}}})]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("通信技术")]),t._v(" "),e("div",{staticClass:"right-select",on:{click:function(o){t.showPicker1=!0}}},[""==t.snForm.commTech?e("span",[t._v("请选择通信技术"),e("i",{staticClass:"van-icon van-icon-arrow"})]):e("span",{staticClass:"right-val"},[t._v(t._s(t.snForm.commTech))])])]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("设备名称")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.snForm.name,expression:"snForm.name"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入设备名称"},domProps:{value:t.snForm.name},on:{input:function(o){o.target.composing||t.$set(t.snForm,"name",o.target.value)}}})]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("绑定园区")]),t._v(" "),e("div",{staticClass:"right-select",on:{click:function(o){t.showPicker2=!0}}},[""==t.snForm.gardenName?e("span",[t._v("请绑定园区"),e("i",{staticClass:"van-icon van-icon-arrow"})]):e("span",{staticClass:"right-val"},[t._v(t._s(t.snForm.gardenName))])])]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("绑定地块")]),t._v(" "),e("div",{staticClass:"right-select",on:{click:function(o){t.showPicker3=!0}}},[""==t.snForm.plotName?e("span",[t._v("请绑定地块"),e("i",{staticClass:"van-icon van-icon-arrow"})]):e("span",{staticClass:"right-val"},[t._v(t._s(t.snForm.plotName))])])]),t._v(" "),e("van-button",{staticClass:"button_box fix-bottom",attrs:{loading:t.btnLoading,type:"info","loading-text":"提交中...",color:"linear-gradient(to right, #EE9742, #EA7739)"}},[t._v("提交")])],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker1,callback:function(o){t.showPicker1=o},expression:"showPicker1"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns1},on:{cancel:function(o){t.showPicker1=!1},confirm:t.onConfirm1}})],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker2,callback:function(o){t.showPicker2=o},expression:"showPicker2"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns2},on:{cancel:function(o){t.showPicker2=!1},confirm:t.onConfirm2}})],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker3,callback:function(o){t.showPicker3=o},expression:"showPicker3"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns3},on:{cancel:function(o){t.showPicker3=!1},confirm:t.onConfirm3}})],1)],1)},n=[],s={render:i,staticRenderFns:n};o.a=s}});